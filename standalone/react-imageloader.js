!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.ReactImageLoader=t(require("React")):r.ReactImageLoader=t(r.React)}(this,function(r){return function(r){function t(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=r,t.c=e,t.p="",t(0)}([function(r,t,e){var n,o,s,a,i,p,u,d,l,c,h,f,g=[].slice;a=e(1),l=e(2),i=e(3),s=a.PropTypes,f=a.DOM,h=f.span,d=f.img,c=f.noscript,p={PENDING:"pending",LOADING:"loading",LOADED:"loaded",FAILED:"failed"},u=function(r){return r.naturalWidth+r.naturalHeight===0||r.width+r.height===0},o=a.createClass({displayName:"ImageLoaderImage",getInitialState:function(){return{isInitialRender:!0}},componentDidMount:function(){return this.setState({isInitialRender:!1})},handleLoad:function(){var r,t,e;return r=1<=arguments.length?g.call(arguments,0):[],this.isMounted()?(t=this.refs.image,"naturalWidth"in t&&!u(t)?this.handleError(new Error("Image <"+t.src+"> could not be loaded.")):"function"==typeof(e=this.props).onLoad?e.onLoad.apply(e,r):void 0):void 0},handleError:function(){var r,t;return r=1<=arguments.length?g.call(arguments,0):[],"function"==typeof(t=this.props).onError?t.onError.apply(t,r):void 0},renderImg:function(){return d(l(this.props,{ref:"image",onLoad:this.handleLoad,onError:this.handleError}))},render:function(){var r;return this.state.isInitialRender?(r=a.renderComponentToStaticMarkup(c(null,this.renderImg())),h({style:{display:"none"},dangerouslySetInnerHTML:{__html:r}})):this.renderImg()}}),r.exports=n=a.createClass({displayName:"ImageLoader",mixins:[i],propTypes:{wrapper:s.func,preloader:s.func},getInitialState:function(){return{status:p.PENDING}},getDefaultProps:function(){return{wrapper:h,loader:o}},componentWillReceiveProps:function(r){return this.props.src!==r.src?this.setState({status:r.src?p.LOADING:p.PENDING}):void 0},getClassName:function(){var r;return r="imageloader "+this.state.status,this.props.className&&(r+=" "+this.props.className),r},getImgProps:function(){var r;return r=l(this.props,{style:l(this.props.style,{display:this.state.status===p.LOADED?null:"none"})}),delete r.wrapper,delete r.preloader,r},loaderDidLoad:function(){return this.setState({status:p.LOADED})},loaderDidError:function(){return this.setState({status:p.FAILED})},renderChildren:function(){return Array.isArray(this.props.children)?this.props.children.slice(0):[this.props.children]},render:function(){var r;return r=[],this.props.src&&r.push(this.renderLoader(o,this.getImgProps())),this.props.preloader&&this.state.status!==p.LOADED&&r.push(new this.props.preloader),this.state.status===p.FAILED&&(r=r.concat(this.renderChildren())),this.props.wrapper({className:this.getClassName()},r)}})},function(t){t.exports=r},function(r){function t(){for(var r={},t=0;t<arguments.length;t++){var e=arguments[t];for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}return r}r.exports=t},function(r,t,e){var n,o,s,a,i=[].slice;o=e(1),a=e(2),n=o.PropTypes,r.exports=s={propTypes:{src:n.string,onLoad:n.func,onError:n.func},renderLoader:function(r,t){return r(a(t,{src:this.props.src,onLoad:function(r){return function(){var t,e;return t=1<=arguments.length?i.call(arguments,0):[],"function"==typeof r.loaderDidLoad&&r.loaderDidLoad.apply(r,t),"function"==typeof(e=r.props).onLoad?e.onLoad.apply(e,t):void 0}}(this),onError:function(r){return function(){var t,e;return t=1<=arguments.length?i.call(arguments,0):[],"function"==typeof r.loaderDidError&&r.loaderDidError.apply(r,t),"function"==typeof(e=r.props).onError?e.onError.apply(e,t):void 0}}(this)}))}}}])});